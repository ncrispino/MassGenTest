<svg viewBox="0 0 1400 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Grid pattern -->
    <pattern id="smallGrid" width="10" height="10" patternUnits="userSpaceOnUse">
      <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#e0e6ed" stroke-width="0.5"/>
    </pattern>
    <pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse">
      <rect width="50" height="50" fill="url(#smallGrid)"/>
      <path d="M 50 0 L 0 0 0 50" fill="none" stroke="#c5d0dc" stroke-width="1"/>
    </pattern>

    <!-- Gradient for bars -->
    <linearGradient id="barGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4a90d9"/>
      <stop offset="100%" style="stop-color:#2c5aa0"/>
    </linearGradient>

    <!-- Glow effect -->
    <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Animation keyframes -->
    <style>
      @keyframes wave1 { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(-62.83px); } }
      @keyframes wave2 { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(-31.42px); } }
      @keyframes wave3 { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(-20.94px); } }
      @keyframes wave4 { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(-15.71px); } }
      @keyframes wave5 { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(-12.57px); } }
      @keyframes wave6 { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(-10.47px); } }
      @keyframes wave7 { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(-8.98px); } }

      .wave1 { animation: wave1 4s ease-in-out infinite; }
      .wave2 { animation: wave2 4s ease-in-out infinite; }
      .wave3 { animation: wave3 4s ease-in-out infinite; }
      .wave4 { animation: wave4 4s ease-in-out infinite; }
      .wave5 { animation: wave5 4s ease-in-out infinite; }
      .wave6 { animation: wave6 4s ease-in-out infinite; }
      .wave7 { animation: wave7 4s ease-in-out infinite; }

      .axis { stroke: #34495e; stroke-width: 1.5; }
      .axis-label { font-family: 'Times New Roman', serif; font-size: 12px; fill: #34495e; }
      .title { font-family: 'Arial', sans-serif; font-weight: bold; font-size: 14px; fill: #2c3e50; }
      .formula { font-family: 'Times New Roman', serif; font-style: italic; font-size: 13px; fill: #2c3e50; }
      .freq-label { font-family: 'Arial', sans-serif; font-size: 10px; fill: #555; }
      .amp-label { font-family: 'Arial', sans-serif; font-size: 9px; fill: #777; }
      .connection { stroke: #bdc3c7; stroke-width: 0.5; stroke-dasharray: 3,3; opacity: 0.6; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="1400" height="800" fill="#f8fafc"/>
  <rect width="1400" height="800" fill="url(#grid)"/>

  <!-- Title -->
  <text x="700" y="30" text-anchor="middle" class="title" font-size="18">Fourier Decomposition of a Complex Periodic Wave</text>

  <!-- Fourier Formula -->
  <text x="700" y="55" text-anchor="middle" class="formula">
    f(t) = Σ Aₙ sin(nωt + φₙ) = A₁sin(ωt) + A₂sin(2ωt) + A₃sin(3ωt) + ...
  </text>

  <!-- ==================== LEFT THIRD: Complex Waveform ==================== -->
  <g transform="translate(30, 80)">
    <text x="200" y="0" text-anchor="middle" class="title">Complex Waveform (2 Periods)</text>

    <!-- Axes -->
    <line x1="30" y1="180" x2="400" y2="180" class="axis"/>
    <line x1="30" y1="30" x2="30" y2="330" class="axis"/>

    <!-- Axis labels -->
    <text x="215" y="355" text-anchor="middle" class="axis-label">Time (t)</text>
    <text x="15" y="180" text-anchor="middle" class="axis-label" transform="rotate(-90, 15, 180)">Amplitude</text>

    <!-- Y-axis ticks -->
    <line x1="25" y1="80" x2="30" y2="80" class="axis"/>
    <text x="20" y="84" text-anchor="end" class="freq-label">+1</text>
    <line x1="25" y1="280" x2="30" y2="280" class="axis"/>
    <text x="20" y="284" text-anchor="end" class="freq-label">-1</text>

    <!-- X-axis ticks -->
    <text x="30" y="345" text-anchor="middle" class="freq-label">0</text>
    <text x="122" y="345" text-anchor="middle" class="freq-label">T/2</text>
    <text x="215" y="345" text-anchor="middle" class="freq-label">T</text>
    <text x="307" y="345" text-anchor="middle" class="freq-label">3T/2</text>
    <text x="400" y="345" text-anchor="middle" class="freq-label">2T</text>

    <!-- Complex wave - sum of 7 components -->
    <!-- Components: A1=1.0(f), A2=0.5(2f), A3=0.7(3f), A4=0.3(4f), A5=0.4(5f), A6=0.2(6f), A7=0.25(7f) -->
    <clipPath id="complexClip">
      <rect x="30" y="30" width="370" height="300"/>
    </clipPath>

    <g clip-path="url(#complexClip)">
      <g class="wave1">
        <path d="M30,180" fill="none" stroke="#e74c3c" stroke-width="2.5" filter="url(#glow)">
          <animate attributeName="d" dur="4s" repeatCount="indefinite" calcMode="linear"
            values="M30,180 Q53,95 76,105 T122,155 T168,210 T215,180 T261,95 T307,105 T353,155 T400,210 T446,180;
                    M-33,180 Q-10,95 13,105 T59,155 T105,210 T152,180 T198,95 T244,105 T290,155 T337,210 T383,180 T430,95;
                    M30,180 Q53,95 76,105 T122,155 T168,210 T215,180 T261,95 T307,105 T353,155 T400,210 T446,180"/>
        </path>
      </g>

      <!-- Actual complex wave path (static representation enhanced with sharp features) -->
      <path id="complexWave" fill="none" stroke="#2c3e50" stroke-width="2" filter="url(#glow)"
        d="M30,180
           C40,120 50,85 60,95
           C70,105 80,140 90,165
           C100,190 110,210 120,195
           C130,180 140,145 150,130
           C160,115 170,125 180,155
           C190,185 200,235 210,255
           C220,275 230,260 240,215
           C250,170 260,100 270,75
           C280,50 290,70 300,115
           C310,160 320,200 330,205
           C340,210 350,185 360,160
           C370,135 380,130 390,150
           C400,170 410,180 420,180"/>
    </g>

    <!-- Period markers -->
    <line x1="215" y1="30" x2="215" y2="330" stroke="#95a5a6" stroke-width="1" stroke-dasharray="5,5"/>
  </g>

  <!-- ==================== MIDDLE THIRD: Component Waves ==================== -->
  <g transform="translate(460, 70)">
    <text x="200" y="10" text-anchor="middle" class="title">Harmonic Components</text>

    <!-- Component 1: Fundamental (f) A=1.0 -->
    <g transform="translate(0, 25)">
      <rect x="0" y="0" width="400" height="85" fill="rgba(255,255,255,0.5)" stroke="#ddd" rx="3"/>
      <line x1="30" y1="42" x2="370" y2="42" stroke="#ccc" stroke-width="0.5"/>
      <text x="5" y="15" class="freq-label" font-weight="bold">1f</text>
      <text x="5" y="28" class="amp-label">A₁=1.0</text>
      <text x="5" y="40" class="amp-label">φ₁=0°</text>

      <clipPath id="clip1"><rect x="30" y="5" width="340" height="75"/></clipPath>
      <g clip-path="url(#clip1)">
        <g class="wave1">
          <path fill="none" stroke="#e74c3c" stroke-width="1.5"
            d="M30,42 Q72,2 115,42 T200,42 T285,42 T370,42 T455,42"/>
        </g>
      </g>

      <!-- Connection line -->
      <line x1="370" y1="42" x2="395" y2="42" class="connection"/>
    </g>

    <!-- Component 2: 2f A=0.5 -->
    <g transform="translate(0, 115)">
      <rect x="0" y="0" width="400" height="85" fill="rgba(255,255,255,0.5)" stroke="#ddd" rx="3"/>
      <line x1="30" y1="42" x2="370" y2="42" stroke="#ccc" stroke-width="0.5"/>
      <text x="5" y="15" class="freq-label" font-weight="bold">2f</text>
      <text x="5" y="28" class="amp-label">A₂=0.5</text>
      <text x="5" y="40" class="amp-label">φ₂=45°</text>

      <clipPath id="clip2"><rect x="30" y="5" width="340" height="75"/></clipPath>
      <g clip-path="url(#clip2)">
        <g class="wave2">
          <path fill="none" stroke="#e67e22" stroke-width="1.5"
            d="M30,42 Q51,22 72,42 T115,42 T157,42 T200,42 T242,42 T285,42 T327,42 T370,42 T412,42"/>
        </g>
      </g>
      <line x1="370" y1="42" x2="395" y2="42" class="connection"/>
    </g>

    <!-- Component 3: 3f A=0.7 -->
    <g transform="translate(0, 205)">
      <rect x="0" y="0" width="400" height="85" fill="rgba(255,255,255,0.5)" stroke="#ddd" rx="3"/>
      <line x1="30" y1="42" x2="370" y2="42" stroke="#ccc" stroke-width="0.5"/>
      <text x="5" y="15" class="freq-label" font-weight="bold">3f</text>
      <text x="5" y="28" class="amp-label">A₃=0.7</text>
      <text x="5" y="40" class="amp-label">φ₃=90°</text>

      <clipPath id="clip3"><rect x="30" y="5" width="340" height="75"/></clipPath>
      <g clip-path="url(#clip3)">
        <g class="wave3">
          <path fill="none" stroke="#f1c40f" stroke-width="1.5"
            d="M30,42 Q44,14 58,42 T87,42 T115,42 T144,42 T172,42 T200,42 T229,42 T257,42 T285,42 T314,42 T342,42 T370,42 T399,42"/>
        </g>
      </g>
      <line x1="370" y1="42" x2="395" y2="42" class="connection"/>
    </g>

    <!-- Component 4: 4f A=0.3 -->
    <g transform="translate(0, 295)">
      <rect x="0" y="0" width="400" height="85" fill="rgba(255,255,255,0.5)" stroke="#ddd" rx="3"/>
      <line x1="30" y1="42" x2="370" y2="42" stroke="#ccc" stroke-width="0.5"/>
      <text x="5" y="15" class="freq-label" font-weight="bold">4f</text>
      <text x="5" y="28" class="amp-label">A₄=0.3</text>
      <text x="5" y="40" class="amp-label">φ₄=180°</text>

      <clipPath id="clip4"><rect x="30" y="5" width="340" height="75"/></clipPath>
      <g clip-path="url(#clip4)">
        <g class="wave4">
          <path fill="none" stroke="#2ecc71" stroke-width="1.5"
            d="M30,42 Q41,30 51,42 T72,42 T94,42 T115,42 T136,42 T157,42 T179,42 T200,42 T221,42 T242,42 T264,42 T285,42 T306,42 T327,42 T349,42 T370,42 T391,42"/>
        </g>
      </g>
      <line x1="370" y1="42" x2="395" y2="42" class="connection"/>
    </g>

    <!-- Component 5: 5f A=0.4 -->
    <g transform="translate(0, 385)">
      <rect x="0" y="0" width="400" height="85" fill="rgba(255,255,255,0.5)" stroke="#ddd" rx="3"/>
      <line x1="30" y1="42" x2="370" y2="42" stroke="#ccc" stroke-width="0.5"/>
      <text x="5" y="15" class="freq-label" font-weight="bold">5f</text>
      <text x="5" y="28" class="amp-label">A₅=0.4</text>
      <text x="5" y="40" class="amp-label">φ₅=225°</text>

      <clipPath id="clip5"><rect x="30" y="5" width="340" height="75"/></clipPath>
      <g clip-path="url(#clip5)">
        <g class="wave5">
          <path fill="none" stroke="#3498db" stroke-width="1.5"
            d="M30,42 Q37,26 44,42 T58,42 T72,42 T87,42 T101,42 T115,42 T129,42 T144,42 T158,42 T172,42 T186,42 T200,42 T215,42 T229,42 T243,42 T257,42 T272,42 T286,42 T300,42 T314,42 T329,42 T343,42 T357,42 T371,42 T385,42"/>
        </g>
      </g>
      <line x1="370" y1="42" x2="395" y2="42" class="connection"/>
    </g>

    <!-- Component 6: 6f A=0.2 -->
    <g transform="translate(0, 475)">
      <rect x="0" y="0" width="400" height="85" fill="rgba(255,255,255,0.5)" stroke="#ddd" rx="3"/>
      <line x1="30" y1="42" x2="370" y2="42" stroke="#ccc" stroke-width="0.5"/>
      <text x="5" y="15" class="freq-label" font-weight="bold">6f</text>
      <text x="5" y="28" class="amp-label">A₆=0.2</text>
      <text x="5" y="40" class="amp-label">φ₆=270°</text>

      <clipPath id="clip6"><rect x="30" y="5" width="340" height="75"/></clipPath>
      <g clip-path="url(#clip6)">
        <g class="wave6">
          <path fill="none" stroke="#9b59b6" stroke-width="1.5"
            d="M30,42 Q36,34 41,42 T53,42 T64,42 T75,42 T87,42 T98,42 T109,42 T121,42 T132,42 T144,42 T155,42 T166,42 T178,42 T189,42 T200,42 T212,42 T223,42 T234,42 T246,42 T257,42 T268,42 T280,42 T291,42 T303,42 T314,42 T325,42 T337,42 T348,42 T359,42 T371,42 T382,42"/>
        </g>
      </g>
      <line x1="370" y1="42" x2="395" y2="42" class="connection"/>
    </g>

    <!-- Component 7: 7f A=0.25 -->
    <g transform="translate(0, 565)">
      <rect x="0" y="0" width="400" height="85" fill="rgba(255,255,255,0.5)" stroke="#ddd" rx="3"/>
      <line x1="30" y1="42" x2="370" y2="42" stroke="#ccc" stroke-width="0.5"/>
      <text x="5" y="15" class="freq-label" font-weight="bold">7f</text>
      <text x="5" y="28" class="amp-label">A₇=0.25</text>
      <text x="5" y="40" class="amp-label">φ₇=315°</text>

      <clipPath id="clip7"><rect x="30" y="5" width="340" height="75"/></clipPath>
      <g clip-path="url(#clip7)">
        <g class="wave7">
          <path fill="none" stroke="#1abc9c" stroke-width="1.5"
            d="M30,42 Q34,32 39,42 T48,42 T58,42 T67,42 T77,42 T86,42 T96,42 T105,42 T115,42 T124,42 T134,42 T143,42 T153,42 T162,42 T172,42 T181,42 T191,42 T200,42 T210,42 T219,42 T229,42 T238,42 T248,42 T257,42 T267,42 T276,42 T286,42 T295,42 T305,42 T314,42 T324,42 T333,42 T343,42 T352,42 T362,42 T371,42 T381,42"/>
        </g>
      </g>
      <line x1="370" y1="42" x2="395" y2="42" class="connection"/>
    </g>

    <!-- Summation symbol -->
    <text x="390" y="350" font-size="40" fill="#2c3e50" font-family="Times New Roman">Σ</text>
    <text x="385" y="375" class="freq-label">=f(t)</text>
  </g>

  <!-- ==================== RIGHT THIRD: Spectra ==================== -->
  <g transform="translate(930, 70)">
    <text x="210" y="10" text-anchor="middle" class="title">Frequency Spectra</text>

    <!-- Magnitude Spectrum -->
    <g transform="translate(0, 380)">
      <text x="210" y="0" text-anchor="middle" class="title" font-size="12">Magnitude Spectrum |Aₙ|</text>

      <!-- Axes -->
      <line x1="50" y1="20" x2="50" y2="200" class="axis"/>
      <line x1="50" y1="200" x2="400" y2="200" class="axis"/>

      <!-- Y-axis label -->
      <text x="25" y="110" text-anchor="middle" class="axis-label" transform="rotate(-90, 25, 110)">Magnitude</text>
      <text x="225" y="220" text-anchor="middle" class="axis-label">Frequency</text>

      <!-- Y-axis ticks -->
      <line x1="45" y1="50" x2="50" y2="50" class="axis"/>
      <text x="40" y="54" text-anchor="end" class="freq-label">1.0</text>
      <line x1="45" y1="125" x2="50" y2="125" class="axis"/>
      <text x="40" y="129" text-anchor="end" class="freq-label">0.5</text>

      <!-- Bars: A1=1.0, A2=0.5, A3=0.7, A4=0.3, A5=0.4, A6=0.2, A7=0.25 -->
      <!-- Bar 1: f, A=1.0 -->
      <rect x="65" y="50" width="35" height="150" fill="url(#barGrad)" rx="2">
        <animate attributeName="opacity" values="1;0.8;1" dur="4s" repeatCount="indefinite"/>
      </rect>
      <text x="82" y="215" text-anchor="middle" class="freq-label">f</text>
      <text x="82" y="45" text-anchor="middle" class="amp-label">1.0</text>

      <!-- Bar 2: 2f, A=0.5 -->
      <rect x="115" y="125" width="35" height="75" fill="url(#barGrad)" rx="2">
        <animate attributeName="opacity" values="1;0.8;1" dur="2s" repeatCount="indefinite"/>
      </rect>
      <text x="132" y="215" text-anchor="middle" class="freq-label">2f</text>
      <text x="132" y="120" text-anchor="middle" class="amp-label">0.5</text>

      <!-- Bar 3: 3f, A=0.7 -->
      <rect x="165" y="95" width="35" height="105" fill="url(#barGrad)" rx="2">
        <animate attributeName="opacity" values="1;0.8;1" dur="1.33s" repeatCount="indefinite"/>
      </rect>
      <text x="182" y="215" text-anchor="middle" class="freq-label">3f</text>
      <text x="182" y="90" text-anchor="middle" class="amp-label">0.7</text>

      <!-- Bar 4: 4f, A=0.3 -->
      <rect x="215" y="155" width="35" height="45" fill="url(#barGrad)" rx="2">
        <animate attributeName="opacity" values="1;0.8;1" dur="1s" repeatCount="indefinite"/>
      </rect>
      <text x="232" y="215" text-anchor="middle" class="freq-label">4f</text>
      <text x="232" y="150" text-anchor="middle" class="amp-label">0.3</text>

      <!-- Bar 5: 5f, A=0.4 -->
      <rect x="265" y="140" width="35" height="60" fill="url(#barGrad)" rx="2">
        <animate attributeName="opacity" values="1;0.8;1" dur="0.8s" repeatCount="indefinite"/>
      </rect>
      <text x="282" y="215" text-anchor="middle" class="freq-label">5f</text>
      <text x="282" y="135" text-anchor="middle" class="amp-label">0.4</text>

      <!-- Bar 6: 6f, A=0.2 -->
      <rect x="315" y="170" width="35" height="30" fill="url(#barGrad)" rx="2">
        <animate attributeName="opacity" values="1;0.8;1" dur="0.67s" repeatCount="indefinite"/>
      </rect>
      <text x="332" y="215" text-anchor="middle" class="freq-label">6f</text>
      <text x="332" y="165" text-anchor="middle" class="amp-label">0.2</text>

      <!-- Bar 7: 7f, A=0.25 -->
      <rect x="365" y="162" width="35" height="38" fill="url(#barGrad)" rx="2">
        <animate attributeName="opacity" values="1;0.8;1" dur="0.57s" repeatCount="indefinite"/>
      </rect>
      <text x="382" y="215" text-anchor="middle" class="freq-label">7f</text>
      <text x="382" y="157" text-anchor="middle" class="amp-label">0.25</text>
    </g>

    <!-- Phase Spectrum -->
    <g transform="translate(0, 30)">
      <text x="210" y="0" text-anchor="middle" class="title" font-size="12">Phase Spectrum φₙ</text>

      <!-- Phase indicators: φ1=0°, φ2=45°, φ3=90°, φ4=180°, φ5=225°, φ6=270°, φ7=315° -->

      <!-- Phase 1: 0° -->
      <g transform="translate(70, 80)">
        <circle cx="0" cy="0" r="25" fill="none" stroke="#ddd" stroke-width="1"/>
        <circle cx="0" cy="0" r="3" fill="#e74c3c"/>
        <line x1="0" y1="0" x2="25" y2="0" stroke="#e74c3c" stroke-width="2"/>
        <text x="0" y="45" text-anchor="middle" class="freq-label">f</text>
        <text x="0" y="57" text-anchor="middle" class="amp-label">0°</text>
      </g>

      <!-- Phase 2: 45° -->
      <g transform="translate(130, 80)">
        <circle cx="0" cy="0" r="25" fill="none" stroke="#ddd" stroke-width="1"/>
        <circle cx="0" cy="0" r="3" fill="#e67e22"/>
        <line x1="0" y1="0" x2="17.68" y2="-17.68" stroke="#e67e22" stroke-width="2"/>
        <text x="0" y="45" text-anchor="middle" class="freq-label">2f</text>
        <text x="0" y="57" text-anchor="middle" class="amp-label">45°</text>
      </g>

      <!-- Phase 3: 90° -->
      <g transform="translate(190, 80)">
        <circle cx="0" cy="0" r="25" fill="none" stroke="#ddd" stroke-width="1"/>
        <circle cx="0" cy="0" r="3" fill="#f1c40f"/>
        <line x1="0" y1="0" x2="0" y2="-25" stroke="#f1c40f" stroke-width="2"/>
        <text x="0" y="45" text-anchor="middle" class="freq-label">3f</text>
        <text x="0" y="57" text-anchor="middle" class="amp-label">90°</text>
      </g>

      <!-- Phase 4: 180° -->
      <g transform="translate(250, 80)">
        <circle cx="0" cy="0" r="25" fill="none" stroke="#ddd" stroke-width="1"/>
        <circle cx="0" cy="0" r="3" fill="#2ecc71"/>
        <line x1="0" y1="0" x2="-25" y2="0" stroke="#2ecc71" stroke-width="2"/>
        <text x="0" y="45" text-anchor="middle" class="freq-label">4f</text>
        <text x="0" y="57" text-anchor="middle" class="amp-label">180°</text>
      </g>

      <!-- Phase 5: 225° -->
      <g transform="translate(310, 80)">
        <circle cx="0" cy="0" r="25" fill="none" stroke="#ddd" stroke-width="1"/>
        <circle cx="0" cy="0" r="3" fill="#3498db"/>
        <line x1="0" y1="0" x2="-17.68" y2="17.68" stroke="#3498db" stroke-width="2"/>
        <text x="0" y="45" text-anchor="middle" class="freq-label">5f</text>
        <text x="0" y="57" text-anchor="middle" class="amp-label">225°</text>
      </g>

      <!-- Phase 6: 270° -->
      <g transform="translate(370, 80)">
        <circle cx="0" cy="0" r="25" fill="none" stroke="#ddd" stroke-width="1"/>
        <circle cx="0" cy="0" r="3" fill="#9b59b6"/>
        <line x1="0" y1="0" x2="0" y2="25" stroke="#9b59b6" stroke-width="2"/>
        <text x="0" y="45" text-anchor="middle" class="freq-label">6f</text>
        <text x="0" y="57" text-anchor="middle" class="amp-label">270°</text>
      </g>

      <!-- Phase 7: 315° -->
      <g transform="translate(220, 180)">
        <circle cx="0" cy="0" r="25" fill="none" stroke="#ddd" stroke-width="1"/>
        <circle cx="0" cy="0" r="3" fill="#1abc9c"/>
        <line x1="0" y1="0" x2="17.68" y2="17.68" stroke="#1abc9c" stroke-width="2"/>
        <text x="0" y="45" text-anchor="middle" class="freq-label">7f</text>
        <text x="0" y="57" text-anchor="middle" class="amp-label">315°</text>
      </g>

      <!-- Phase reference legend -->
      <g transform="translate(50, 180)">
        <text x="0" y="0" class="freq-label">Phase Reference:</text>
        <line x1="0" y1="15" x2="20" y2="15" stroke="#666" stroke-width="1"/>
        <text x="25" y="19" class="amp-label">0° = →</text>
        <text x="25" y="32" class-="amp-label" class="amp-label">CCW positive</text>
      </g>
    </g>

    <!-- Color Legend -->
    <g transform="translate(30, 280)">
      <text x="0" y="0" class="title" font-size="11">Component Colors:</text>
      <rect x="0" y="10" width="15" height="10" fill="#e74c3c"/>
      <text x="20" y="19" class="freq-label">1f (fundamental)</text>
      <rect x="0" y="25" width="15" height="10" fill="#e67e22"/>
      <text x="20" y="34" class="freq-label">2f (2nd harmonic)</text>
      <rect x="0" y="40" width="15" height="10" fill="#f1c40f"/>
      <text x="20" y="49" class="freq-label">3f (3rd harmonic)</text>
      <rect x="0" y="55" width="15" height="10" fill="#2ecc71"/>
      <text x="20" y="64" class="freq-label">4f (4th harmonic)</text>

      <rect x="200" y="10" width="15" height="10" fill="#3498db"/>
      <text x="220" y="19" class="freq-label">5f (5th harmonic)</text>
      <rect x="200" y="25" width="15" height="10" fill="#9b59b6"/>
      <text x="220" y="34" class="freq-label">6f (6th harmonic)</text>
      <rect x="200" y="40" width="15" height="10" fill="#1abc9c"/>
      <text x="220" y="49" class="freq-label">7f (7th harmonic)</text>
    </g>
  </g>

  <!-- Footer note -->
  <text x="700" y="785" text-anchor="middle" class="freq-label" font-style="italic">
    Any periodic function can be represented as an infinite sum of sinusoidal functions (Fourier Series)
  </text>
</svg>
